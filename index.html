<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript">
      window.purechatApi = { l: [], t: [], on: function () { this.l.push(arguments); } };
      (function () {
        var done = false;
        var script = document.createElement('script');
        script.async = true;
        script.type = 'text/javascript';
        script.src = 'https://app.purechat.com/VisitorWidget/WidgetScript';
        document.getElementsByTagName('HEAD').item(0).appendChild(script);
        script.onreadystatechange = script.onload = function (e) {
          if (!done && (!this.readyState || this.readyState === 'loaded' || this.readyState === 'complete')) {
            //var w = new PCWidget({ c: '5586629f-d2da-4a2b-880b-fa6fb83c0d79', f: true });

	    var purechatApi = new PCWidget({ c: '5586629f-d2da-4a2b-880b-fa6fb83c0d79', f: true });
        
	    done = true;
          }
        };
      })();

	window.purechatApi.on('chatbox:ready', function () {
            purechatApi.set('visitor.name', 'John Doe');
            purechatApi.set('visitor.email', 'john.doe@example.com');

	    purechatApi.set('chatbox.expanded', true); // Expanded the chat box (false collapses it)
	    purechatApi.set('chatbox.showMinimizeButton', false); // Hides the minimize button
        });

	window.purechatApi.on('chat:end', function (args) {
		// console.log("Visitor's chat has ended :(");
		// Swal.fire({
  //           		title: 'Chat Ended!',
  //           		text: 'Would you like to leave feedback?',
  //           		icon: 'question',
  //           		showCancelButton: true,
  //           		confirmButtonText: 'Yes',
  //           		cancelButtonText: 'No'
  //         	});
		console.log('Chat widget closed');
          
          // Show your custom pop-up
          var customPopup = document.createElement('div');
          customPopup.innerHTML = `
            <div style="position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background-color:#fff; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1);">
              <h2>Thank you for chatting!</h2>
              <p>Would you like to leave feedback?</p>
              <button onclick="closePopup()">Close</button>
            </div>
          `;
          document.body.appendChild(customPopup);

          // Function to close custom pop-up
          function closePopup() {
            document.body.removeChild(customPopup);
          }
	});

    </script>
  </head>
  <body>
    
  </body>
</html>
